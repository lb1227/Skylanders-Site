<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Skylanders Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      padding: 20px;
      background-color: #121212;
      color: #f0f0f0;
    }
    .container {
      max-width: 1600px;
      margin: auto;
      background: #1e1e1e;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: #2a2a2a;
      margin: 5px 0;
      padding: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-radius: 5px;
    }
    button {
      background: red;
      color: white;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
      border-radius: 3px;
    }
    img {
      width: 200px;
      height: auto;
      border-radius: 5px;
      margin-bottom: 10px;
    }
    .collectible-item {
      display: flex;
      align-items: center;
      gap: 10px;
    }
  </style>
</head>
<body>
  <nav style="background-color: #000; padding: 10px; color: white; display: flex; justify-content: space-between; align-items: center;">
    <h2 style="margin: 0;">Skylanders Tracker</h2>
    <div id="authButtonsNav"></div>
  </nav>

  <div class="container">
    <h2>My Collectibles</h2>
    <label for="gameSelector">Select Game:</label>
    <select id="gameSelector">
      <option value="Spyro's Adventure">Spyro's Adventure</option>
      <option value="Giants">Giants</option>
    </select>
    <div id="progressBar" style="height: 20px; background: #ccc; border-radius: 5px; overflow: hidden; margin-bottom: 10px; position: relative;">
      <div id="progressFill" style="height: 100%; width: 0%; background: #4CAF50;"></div>
      <span id="progressText" style="position: absolute; width: 100%; text-align: center; font-weight: bold; line-height: 20px; color: white;">0%</span>
    </div>
    <div id="collectibleContainer">
      <img id="collectibleImage" alt="Collectible Image" />
      <p id="collectibleName"></p>
      <select id="statusInput">
        <option value="Have it">Have it</option>
        <option value="Don't have it">Don't have it</option>
      </select>
      <button id="nextButton">Next</button>
    </div>
    <div style="display: flex; gap: 20px;">
      <div style="flex: 1;">
        <h3>Have It</h3>
        <ul id="haveList"></ul>
      </div>
      <div style="flex: 1;">
        <h3>Don't Have It</h3>
        <ul id="dontHaveList"></ul>
      </div>
    </div>
  </div>
  <script>
    const games = {
  "Spyro's Adventure": [
    { name: "Spyro", image: "https://skylanderscharacterlist.com/wp-content/uploads/2013/02/Spyro1.png" },
    { name: "Trigger Happy", image: "https://skylanderscharacterlist.com/wp-content/uploads/2013/02/TriggerHappy1.png" },
    { name: "Stealth Elf", image: "https://skylanderscharacterlist.com/wp-content/uploads/2013/02/StealthElf1.png" },
    { name: "Gill Grunt", image: "https://skylanderscharacterlist.com/wp-content/uploads/2013/02/GillGrunt1.png" },
    { name: "Eruptor", image: "https://skylanderscharacterlist.com/wp-content/uploads/2013/02/Eruptor1.png" }
  ],
  "Giants": [
    { name: "Bouncer", image: "https://skylanderscharacterlist.com/wp-content/uploads/2013/02/Bouncer.png" },
    { name: "Crusher", image: "https://skylanderscharacterlist.com/wp-content/uploads/2013/02/Crusher.png" },
    { name: "Eye-Brawl", image: "https://skylanderscharacterlist.com/wp-content/uploads/2013/02/EyeBrawl1.png" },
    { name: "Hot Head", image: "https://skylanderscharacterlist.com/wp-content/uploads/2013/02/HotHead.png" },
    { name: "Ninjini", image: "https://skylanderscharacterlist.com/wp-content/uploads/2013/02/Ninjini.png" }
  ]
};

    let currentGame = "Spyro's Adventure";
    let collectibles = games[currentGame];
    let collectiblesQueue = [...collectibles];
    let collectedItems = [];

    document.getElementById("nextButton").addEventListener("click", () => {
      const status = document.getElementById("statusInput").value;
      const current = collectiblesQueue[0];
      if (!current) return;
      collectiblesQueue.shift();
      collectedItems.push({ ...current, status });
      renderCollectedList();
      showCurrentCollectible();
      updateProgress();
      saveProgress();
    });

    document.getElementById("gameSelector").addEventListener("change", switchGame);

    function switchGame() {
      const user = localStorage.getItem("sky_user") || "guest";
      saveProgress();
      currentGame = document.getElementById("gameSelector").value;
      collectibles = games[currentGame];
      loadProgress(user);
      renderCollectedList();
      showCurrentCollectible();
      updateProgress();
    }

    function loadProgress(user) {
      const key = `sky_progress_${user}_${currentGame}`;
      const saved = localStorage.getItem(key);
      if (saved) {
        const parsed = JSON.parse(saved);
        collectedItems = parsed.collected || [];
        collectiblesQueue = parsed.queue || [...collectibles];
      } else {
        collectedItems = [];
        collectiblesQueue = [...collectibles];
      }
    }

    function renderCollectedList() {
  const haveList = document.getElementById("haveList");
  const dontHaveList = document.getElementById("dontHaveList");
  haveList.innerHTML = "";
  dontHaveList.innerHTML = "";

  collectedItems.forEach(item => {
        const listId = item.status === "Have it" ? "haveList" : "dontHaveList";
        const list = document.getElementById(listId);
        const li = document.createElement("li");
        li.innerHTML = `<div class="collectible-item">
  <img src="${item.image}" alt="${item.name}" />
  <span>${item.name} - <strong>${item.status}</strong></span>
</div>
<button class="remove-button" data-name="${item.name}" data-status="${item.status}">Remove</button>`;
        list.appendChild(li);

  li.querySelector('.remove-button').addEventListener('click', function() {
    removeCollectible(this.getAttribute('data-name'), this, this.getAttribute('data-status'));
  });
      });
    }

    function showCurrentCollectible() {
      if (collectiblesQueue.length > 0) {
        document.getElementById("collectibleImage").src = collectiblesQueue[0].image;
        document.getElementById("collectibleName").innerText = collectiblesQueue[0].name;
      } else {
        document.getElementById("collectibleImage").src = "";
        document.getElementById("collectibleName").innerText = "";
      }
    }

    function updateProgress() {
      const total = games[currentGame].length;
      const collected = collectedItems.length;
      const percent = Math.round((collected / total) * 100);
      document.getElementById("progressFill").style.width = percent + "%";
      document.getElementById("progressText").innerText = percent + "%";
    }

    function saveProgress() {
      const user = localStorage.getItem("sky_user") || "guest";
      const key = `sky_progress_${user}_${currentGame}`;
      const data = {
        collected: collectedItems,
        queue: collectiblesQueue
      };
      localStorage.setItem(key, JSON.stringify(data));
    }

    function removeCollectible(name, button, status) {
      const li = button.closest('li');
      if (li) li.remove();
      const index = collectedItems.findIndex(c => c.name === name && c.status === status);
      if (index !== -1) {
        const [restored] = collectedItems.splice(index, 1);
        collectiblesQueue.unshift({ name: restored.name, image: restored.image });
        showCurrentCollectible();
        renderCollectedList();
        updateProgress();
        saveProgress();
      }
    }
  </script>
</body>
</html>
